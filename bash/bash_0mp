# Add some directories to the *PATH unless they are already there.
case "$PATH" in
    *$HOME/bin*) ;;
    *) PATH="$HOME/bin:$PATH" ;;
esac
case "$PATH" in
    *$HOME/.local/bin*) ;;
    *) PATH="$HOME/.local/bin:$PATH" ;;
esac
case "$MANPATH" in
    *$HOME/.local/share/man*) ;;
    *) MANPATH="$HOME/.local/share/man:$MANPATH" ;;
esac

# Configure history.
HISTCONTROL=ignoredups:ignorespace:erasedups
HISTSIZE=20000

# C-s and C-q key bindings for the flow control should be off by default.
# http://stackoverflow.com/a/6951487/4694621
stty -ixon -ixoff

# Check the window size after each command and, if necessary, update the
# values of LINES and  COLUMNS.
shopt -s checkwinsize

# Aliases & functions
alias w3m="w3m -v"
ddg() {
    local search='/?q='"$@"
    command w3m -X "ddg.gg${search%%/?q=}"
}

tmux_clear_detached_sessions() {
    tmux list-sessions | grep -E -v '\(attached\)$' | while IFS='\n' read line; do
        tmux kill-session -t "${line%%:*}"
    done
}

ssh_agent_activate() {
    eval $(ssh-agent)
    ssh-add
}

PS1='  \u@\h $PWD\n\[\e[0;44m\] \[\e[0m\] '

export EDITOR=vim
export PAGER='less --ignore-case'
export MANPAGER="$PAGER --squeeze-blank-lines --RAW-CONTROL-CHARS"
# Make manpages fit the screen even if it's very small.
export MANWIDTH="$((COLUMNS < 80 ? (COLUMNS - 2) : 78))"
