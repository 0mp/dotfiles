# Is it running low on power?
if [ ! -f ~/.0mp-switch/low-battery-alert-off ] && \
    acpiconf -i 0 | awk -v discharging=no '
        /^State:[[:space:]]+discharging$/ {
            discharging = yes
        }
        /^Remaining capacity:/ {
            capacity = substr($3, 1, length($3) -1)
        }
        END {
            if (discharging == yes && int(capacity) < 10) {
                exit 0
            }
            exit 1
        }'
then
    touch ~/.0mp-switch/low-battery-alert-off
    button="ALRIGHT I'M ON IT JUST PLEASE DON'T DIE"
    xmessage -buttons "$button" -default "$button" -file - <<'MESSAGE'
 _   _ _____ _     _     ___    _____ _   _ _____ ____  _____ _
| | | | ____| |   | |   / _ \  |_   _| | | | ____|  _ \| ____| |
| |_| |  _| | |   | |  | | | |   | | | |_| |  _| | |_) |  _| | |
|  _  | |___| |___| |__| |_| |   | | |  _  | |___|  _ <| |___|_|
|_| |_|_____|_____|_____\___/    |_| |_| |_|_____|_| \_\_____(_)

 _____ _   _ _____   ____    _  _____ _____ _____ ______   __
|_   _| | | | ____| | __ )  / \|_   _|_   _| ____|  _ \ \ / /
  | | | |_| |  _|   |  _ \ / _ \ | |   | | |  _| | |_) \ V /
  | | |  _  | |___  | |_) / ___ \| |   | | | |___|  _ < | |
  |_| |_| |_|_____| |____/_/   \_\_|   |_| |_____|_| \_\|_|

 ___ ____    ______   _____ _   _  ____
|_ _/ ___|  |  _ \ \ / /_ _| \ | |/ ___|
 | |\___ \  | | | \ V / | ||  \| | |  _
 | | ___) | | |_| || |  | || |\  | |_| |_
|___|____/  |____/ |_| |___|_| \_|\____(_)

  ____ ___  _   _ _     ____   __   _____  _   _
 / ___/ _ \| | | | |   |  _ \  \ \ / / _ \| | | |
| |  | | | | | | | |   | | | |  \ V / | | | | | |
| |__| |_| | |_| | |___| |_| |   | || |_| | |_| |
 \____\___/ \___/|_____|____/    |_| \___/ \___/

 ____  _     _____    _    ____  _____   ____   ___
|  _ \| |   | ____|  / \  / ___|| ____| |  _ \ / _ \
| |_) | |   |  _|   / _ \ \___ \|  _|   | | | | | | |
|  __/| |___| |___ / ___ \ ___) | |___  | |_| | |_| |
|_|   |_____|_____/_/   \_\____/|_____| |____/ \___/

 ____   ___  __  __ _____ _____ _   _ ___ _   _  ____
/ ___| / _ \|  \/  | ____|_   _| | | |_ _| \ | |/ ___|
\___ \| | | | |\/| |  _|   | | | |_| || ||  \| | |  _
 ___) | |_| | |  | | |___  | | |  _  || || |\  | |_| |
|____/ \___/|_|  |_|_____| |_| |_| |_|___|_| \_|\____|

    _    ____   ___  _   _ _____   ___ _____ ___
   / \  | __ ) / _ \| | | |_   _| |_ _|_   _|__ \
  / _ \ |  _ \| | | | | | | | |    | |  | |   / /
 / ___ \| |_) | |_| | |_| | | |    | |  | |  |_|
/_/   \_\____/ \___/ \___/  |_|   |___| |_|  (_)
MESSAGE
fi
