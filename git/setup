#! /bin/sh -

. ../lib.sh

set -eu

lib_info 'setup'

FILES=
PREFIX=
CUSTOMFILES='gitconfig'
lib_custom_install() {
    touch "$PWD/gitconfig.local"
    lib_install_file "$PWD/gitconfig.local" ~/.gitconfig
}
lib_back_up
trap lib_roll_back EXIT
lib_install
trap - EXIT

gitname='Mateusz Piotrowski'
gitemail='0mp@FreeBSD.org'

while [ $# -gt 0 ]
do
    case "$1" in
        --name)
            shift 1
            if [ $# -eq 0 ]
            then
                lib_err "name not provided for the --name option"
                exit 1
            fi
            gitname="$1"
            shift 1
            ;;

        --email)
            shift 1
            if [ $# -eq 0 ]
            then
                lib_err "email not provided for the --email option"
                exit 1
            fi
            gitemail="$1"
            shift 1
            ;;

         --github-ssh)
            shift 1
            git config --global url."ssh://git@github.com/".insteadOf https://github.com/
            ;;

        *)
            shift
            break
            ;;
    esac
done

git config --global user.name "$gitname"
git config --global user.email "$gitemail"
git config --global include.path "$PWD/gitconfig"

lib_info 'setup done'
