#! /bin/sh -

. ../lib.sh

set -eu

lib_info 'setup.root'

case "$*" in
    *)
        # Use sudo(8) instead of su(1) when available.
        cat <<- EOF >> /etc/make.conf
.if exists(/usr/local/bin/sudo)
SU_CMD=/usr/local/bin/sudo -E sh -c
.endif
EOF

        # Turn on additional checks for ports.
        lib_set_once /etc/make.conf DEVELOPER=YES

        # Disable the delay after a warning. For example there will be no delay
        # after a warning about a missing LICENSE variable when building a port.
        lib_set_once /etc/make.conf DEV_WARNING_WAIT=0

        # Use ccache(1).
        lib_set_once /etc/src.conf WITH_CCACHE_BUILD=YES

        # Use meta mode. See src-env.conf(5) for details.
        lib_set_once /etc/src-env.conf WITH_META_MODE=YES

        # Ignore /etc/motd when running mergemaster(8) after installworld.
        lib_set_once /etc/mergemaster.rc  IGNORE_FILES+='/etc/motd /boot'
        ;;
esac

lib_info 'setup.root done'
